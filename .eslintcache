[{"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/index.js":"1","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/App.js":"2","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/reportWebVitals.js":"3","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/Ballot/Ballot.js":"4","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/Categories/Categories.js":"5","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Api/Api.js":"6","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Hooks/usePersState.js":"7","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/UI/Modal/Modal.js":"8","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/UI/SlidePanel/SlidePanel.js":"9","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/UI/SlidePanel/SlideCard.js":"10","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/UI/Card/Card.js":"11"},{"size":500,"mtime":1616868715745,"results":"12","hashOfConfig":"13"},{"size":268,"mtime":1616868715744,"results":"14","hashOfConfig":"13"},{"size":362,"mtime":1616868715745,"results":"15","hashOfConfig":"13"},{"size":4007,"mtime":1616868671968,"results":"16","hashOfConfig":"13"},{"size":712,"mtime":1616868671969,"results":"17","hashOfConfig":"13"},{"size":147,"mtime":1616868715743,"results":"18","hashOfConfig":"13"},{"size":429,"mtime":1616868715745,"results":"19","hashOfConfig":"13"},{"size":843,"mtime":1616868671969,"results":"20","hashOfConfig":"13"},{"size":1054,"mtime":1616868671968,"results":"21","hashOfConfig":"13"},{"size":338,"mtime":1616868671969,"results":"22","hashOfConfig":"13"},{"size":276,"mtime":1616868671969,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"vg4bds",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/index.js",[],"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/App.js",[],"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/reportWebVitals.js",[],"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/Ballot/Ballot.js",["47"],"import React, { useState, useEffect } from 'react';\nimport './Ballot.css';\nimport Api from '../../Api/Api';\nimport usePersState from '../../Hooks/usePersState';\nimport Categories from '../Categories/Categories';\nimport Modal from '../UI/Modal/Modal';\nimport SlidePanel from '../UI/SlidePanel/SlidePanel';\n\nconst Ballot = () => {\n  const defaultCat = []\n  const defaultSubmissions = ({showPanel:false, currentResults:[]})\n  const [curCategories, setCategories] = usePersState('curCategories', defaultCat);\n  const [isReady, setIsReady] = useState({ready:false, ballotResults:''});\n  const [curSubmissions, setSubmissions] = usePersState('curSubmissions', defaultSubmissions);\n\n  useEffect(() => {\n    if (curCategories.length === 0) {\n      apiHandler();\n    }\n  }, [curCategories.length, setCategories]);\n\n  useEffect(() => {\n      if (isReady.ballotResults.length !== 0 ) {\n        setSubmissions(curSubmissions => { return {...curSubmissions, currentResults: [...curSubmissions.currentResults, isReady.ballotResults]}})\n      }\n  }, [setSubmissions, isReady.ballotResults]);\n  \n  const apiHandler = () => {\n      Api.getBallotData()\n      .then(responseData => {\n        let catagories = responseData.items;\n        const loadedCategories = [];\n        for (const key in catagories) {\n          loadedCategories.push({\n            id: catagories[key].id,\n            title: catagories[key].title,\n            catitems: catagories[key].items,\n            isSelected:false,\n          });\n        }\n        setCategories(loadedCategories);\n      });\n  };\n    \n  const userSelectHandler = (catId, itemId) => {\n      let cats = [...curCategories];\n      let cat = cats.find(x => x.id === catId)\n      let select = cat.catitems.find(x => x.isSelected === true)\n      if (!cat.isSelected) {\n        cat.isSelected = true;\n        cat.catitems.find(x => x.id === itemId).isSelected = true;\n        setCategories(curCategories =>\n          cats\n        );\n      } else if (select) {\n        select.isSelected = '';\n        cat.catitems.find(x => x.id === itemId).isSelected = true;\n        setCategories(curCategories =>\n          cats\n        );\n      }\n  };\n  \n  const validateBallot = () => {\n      let ready = false;\n      for (const key in curCategories) {\n        if (curCategories[key].isSelected) {\n          setIsReady(isReady => ({\n              ...isReady,\n              ready: true\n          }));\n          ready = true;\n        } else {\n          setIsReady(isReady => ({\n              ...isReady,\n              ready: false\n          }));\n          ready = false;  \n        }\n      }\n      return ready;\n  }\n  const submitBallotHandler = async () => {\n      let ready = await validateBallot();\n      let catChoice = curCategories.filter(x => x.isSelected === true)\n      let ballotChoice = catChoice.map(cat => ({\n        id:cat.id,\n        cat:cat.title,\n        catitem:cat.catitems.filter(x => x.isSelected === true)\n      }));\n      if (ready) {\n        console.log('Ready', ready);\n        setIsReady(isReady => ({...isReady, ballotResults: ballotChoice}))\n        apiHandler();\n      }\n  };\n\n  const seeResultsHandler = () => {\n      setSubmissions(curSubmissions => ({...curSubmissions, showPanel: true}))\n  };\n\n  return (\n    <div className='ballot'>\n       {isReady.ready && <Modal \n          onClose={() => setIsReady(isReady => ({...isReady, ready: false}))}\n          details={isReady.ballotResults}>\n       </Modal>\n      }  \n      <h1>AWARDS 2021</h1>\n      <Categories\n        categories={curCategories}\n        onSelectItem={userSelectHandler}\n      />\n      {curSubmissions.showPanel && <SlidePanel \n          onClose={() => setSubmissions(curSubmissions => ({...curSubmissions, showPanel: false}))}\n          details={curSubmissions.currentResults}>\n       </SlidePanel>}\n      <button className=\"results-button\" onClick={seeResultsHandler}>See Current Results</button>\n       <button onClick={submitBallotHandler}>Submit Ballot</button> \n    </div>\n  );\n\n}\n\nexport default Ballot;\n","/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/Categories/Categories.js",[],"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Api/Api.js",[],"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Hooks/usePersState.js",[],"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/UI/Modal/Modal.js",[],"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/UI/SlidePanel/SlidePanel.js",[],"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/UI/SlidePanel/SlideCard.js",[],"/Users/cherchir/Front-End/Sites/movie-awards-2021/src/Components/UI/Card/Card.js",[],{"ruleId":"48","severity":1,"message":"49","line":20,"column":6,"nodeType":"50","endLine":20,"endColumn":43,"suggestions":"51"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'apiHandler'. Either include it or remove the dependency array.","ArrayExpression",["52"],{"desc":"53","fix":"54"},"Update the dependencies array to be: [apiHandler, curCategories.length, setCategories]",{"range":"55","text":"56"},[765,802],"[apiHandler, curCategories.length, setCategories]"]