(this["webpackJsonpreact-take-home"]=this["webpackJsonpreact-take-home"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),i=n(9),r=n.n(i),a=(n(15),n(16),n(7)),l=n.n(a),o=n(10),u=n(8),j=n(2),d=n(3),b=(n(18),{getBallotData:function(){return fetch("/api/getBallotData").then((function(e){return e.json()}))}}),O=function(e,t){var n=Object(c.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),s=Object(d.a)(n,2),i=s[0],r=s[1];return Object(c.useEffect)((function(){window.localStorage.setItem(e,JSON.stringify(i))}),[i,e]),[i,r]},f=(n(19),n(20),n(0)),h=s.a.memo((function(e){return Object(f.jsx)("div",{className:"col",children:Object(f.jsx)("div",{className:"card ".concat(e.selected?"selected":""),onClick:e.click,children:e.children})})})),m=function(e){return e.categories.map((function(t,n){return Object(f.jsxs)("div",{className:"category",children:[Object(f.jsx)("h2",{children:t.title}),Object(f.jsx)("div",{className:"row",children:t.catitems.map((function(n){return Object(f.jsxs)(h,{selected:n.isSelected,click:e.onSelectItem.bind(undefined,t.id,n.id),children:[Object(f.jsx)("h3",{children:n.title}),Object(f.jsx)("img",{src:n.photoUrL,alt:n.title}),Object(f.jsx)("button",{children:n.isSelected?"Selected":"Select Nominee"})]},n.id)}))})]},t.id)}))},x=(n(22),s.a.memo((function(e){var t=Object(f.jsx)("p",{children:"Please select a nominee for every category"});return Object(f.jsxs)(s.a.Fragment,{children:[Object(f.jsx)("div",{className:"backdrop",onClick:e.onClose}),Object(f.jsxs)("div",{className:"modal",children:[Object(f.jsx)("h2",{children:"Success! Ballot Submitted"}),Object(f.jsx)("p",{children:Object(f.jsx)("strong",{children:"Check out your submission"})}),0!==e.details.length?e.details.map((function(e){return Object(f.jsxs)("li",{children:[Object(f.jsx)("h4",{children:e.cat}),Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Vote: "}),e.catitem[0].title]})]},e.id)})):t,Object(f.jsx)("div",{className:"modal__actions",children:Object(f.jsx)("button",{className:"close-button",type:"button",onClick:e.onClose})})]})]})}))),p=s.a.memo((function(e){return Object(f.jsx)("div",{children:e.submission.map((function(e){return Object(f.jsxs)("li",{children:[Object(f.jsx)("p",{children:Object(f.jsx)("strong",{children:e.cat})}),Object(f.jsx)("p",{children:Object(f.jsx)("i",{children:e.catitem[0].title})})]},e.id)}))})})),v=(n(23),s.a.memo((function(e){var t=Object(f.jsx)("p",{children:"No results have been submitted"});return Object(f.jsxs)(s.a.Fragment,{children:[Object(f.jsx)("div",{className:"backdrop",onClick:e.onClose}),Object(f.jsxs)("div",{className:"sidepanel",children:[Object(f.jsx)("h2",{children:"Latest Submissions"}),0!==e.details.length?e.details.map((function(e,t){return Object(f.jsxs)("div",{className:"slidecard-panel",children:[Object(f.jsxs)("h4",{children:["Submission ",t+1]}),Object(f.jsx)(p,{submission:e})]},t)})):t,Object(f.jsx)("div",{className:"sidepanel__actions",children:Object(f.jsx)("button",{className:"close-button",type:"button",onClick:e.onClose})})]})]})}))),S=function(){var e=O("curCategories",[]),t=Object(d.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)({ready:!1,ballotResults:""}),r=Object(d.a)(i,2),a=r[0],h=r[1],p=O("curSubmissions",{showPanel:!1,currentResults:[]}),S=Object(d.a)(p,2),g=S[0],N=S[1];Object(c.useEffect)((function(){0===n.length&&C()}),[n.length,s]),Object(c.useEffect)((function(){0!==a.ballotResults.length&&N((function(e){return Object(j.a)(Object(j.a)({},e),{},{currentResults:[].concat(Object(u.a)(e.currentResults),[a.ballotResults])})}))}),[N,a.ballotResults]);var C=function(){b.getBallotData().then((function(e){var t=e.items,n=[];for(var c in t)n.push({id:t[c].id,title:t[c].title,catitems:t[c].items,isSelected:!1});s(n)}))},k=function(){var e=!1;for(var t in n)n[t].isSelected?(h((function(e){return Object(j.a)(Object(j.a)({},e),{},{ready:!0})})),e=!0):(h((function(e){return Object(j.a)(Object(j.a)({},e),{},{ready:!1})})),e=!1);return e},y=function(){var e=Object(o.a)(l.a.mark((function e(){var t,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,c=n.filter((function(e){return!0===e.isSelected})),s=c.map((function(e){return{id:e.id,cat:e.title,catitem:e.catitems.filter((function(e){return!0===e.isSelected}))}})),t&&(console.log("Ready",t),h((function(e){return Object(j.a)(Object(j.a)({},e),{},{ballotResults:s})})),C());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"ballot",children:[a.ready&&Object(f.jsx)(x,{onClose:function(){return h((function(e){return Object(j.a)(Object(j.a)({},e),{},{ready:!1})}))},details:a.ballotResults}),Object(f.jsx)("h1",{children:"AWARDS 2021"}),Object(f.jsx)(m,{categories:n,onSelectItem:function(e,t){var c=Object(u.a)(n),i=c.find((function(t){return t.id===e})),r=i.catitems.find((function(e){return!0===e.isSelected}));i.isSelected?r&&(r.isSelected="",i.catitems.find((function(e){return e.id===t})).isSelected=!0,s((function(e){return c}))):(i.isSelected=!0,i.catitems.find((function(e){return e.id===t})).isSelected=!0,s((function(e){return c})))}}),g.showPanel&&Object(f.jsx)(v,{onClose:function(){return N((function(e){return Object(j.a)(Object(j.a)({},e),{},{showPanel:!1})}))},details:g.currentResults}),Object(f.jsx)("button",{className:"results-button",onClick:function(){N((function(e){return Object(j.a)(Object(j.a)({},e),{},{showPanel:!0})}))},children:"See Current Results"}),Object(f.jsx)("button",{onClick:y,children:"Submit Ballot"})]})};var g=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(S,{})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),i(e),r(e)}))};r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root")),N()}],[[24,1,2]]]);
//# sourceMappingURL=main.8d5992aa.chunk.js.map